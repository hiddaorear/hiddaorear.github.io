---
layout: post
title:  Linux札记
category: 技术
tags: [bash Linux]
keywords:  bash
description:
---

###  Linux

####  Linux

#### Tuesday, 13  2017 Jun

![Haskell](/../../assets/img/tech/2017/linux.jpg)

用了五年多的Ubuntu，然后并没有在上面进行Linux开发。多数也是用Windows一样，日常使用，开一下浏览器，写一点东西。要用得较多的，不过是git这些工具。这段时间想复习一下正则表达式，看了一下《正则指引》，最后一章讲到Linux里一些涉及正则的工具，在Mac电脑上实验一下，发现着实好用。想起自己已经用了五年的Linux，bash也用得不算少，现在日常也是vim作为主力编辑器，却对命令行下很多有用的命令没用过。看来并非是日日看见，就熟悉了，还得去动手思考。


### find

`find [目录] [条件] [动作]`

````bash

find . -name 'my*' -ls
# 搜索当前目录，含子目录，文件名以my开头的文件，并显示详细信息

find . -type f -mmin -10
# 搜索当前目录中，所有过去10分钟中更新过的普通文件。
# 如果不加-type f参数，则搜索普通文件+特殊文件+目录。

find . -name \*.js | xargs grep -n --color=auto 'badJS'
# find 配合grep

````

类似的命令：which(只能用于程序名搜索)，whereis(搜索系统命令的位置)

### grep

`grep [-cinrABC] [--color=auto] [正则表达式|字符串] [filename|dir]`

````bash

grep -cin -C 3 --color=auto '^cat' text.txt
# c 统计搜索到的次数
# i 忽略大小写
# n 行号
# C 显示之前之后的3行
# --color=auto 关键词设置颜色

grep -r -A 3 'cat$' home
# r 递归搜索home目录
# A 显示之前的3行

````
### xargs

x是乘号，args则是arguments的意思。合起来，大概是产生某个指令的参数的意思。以空白或换行符分割。

`xargs [-0epn] command`

无command则以echo输出。
xargs处理不支持管道的命令的情况。

````bash
# 找出usr/sbin中具有特殊权限的文件，并ls -l列出其属性
find /usr/sbin -perm /7000 | xargs ls -l

# 或者
ls -l $(find /usr/sbin -perm /7000)

````

### awk

### sed

### scp

`scp local_file user@remote_host:/remote_directory`

````bash

for file in $(git diff --name-only); do scp -P 932 $file apache@remote_host:/home/web/$file; done;
# 上传git中更新的文件到远程
# 难点，scp支持多个文件上传到一个对应的目录，但不支持多个文件传到多个对应的目录
# 此处使用循环实现
# 见https://superuser.com/questions/312697/how-to-feed-grep-output-into-scp
# 想了各种办法，包括使用xargs，均没能实现，这一行代码解决了本地开发映射到远程的问题
# 避免了在编辑器中，每次保持就上传，或者图片文件等要去手动上传
# 也避免了在ftp软件中操作的麻烦
# bash正是小李飞刀

````

### Wireshark




# 参考资料：

[应该知道的LINUX技巧](http://coolshell.cn/articles/8883.html)

[AWK 简明教程](http://coolshell.cn/articles/9070.html)

[AWK程序设计语言](http://awk.readthedocs.io/en/latest/index.html)

[第十一章、认识与学习 BASH ](http://cn.linux.vbird.org/linux_basic/0320bash.php#grep)

[一站式学习Wireshark](https://community.emc.com/message/818739#818739)

[Linux的五个查找命令](http://www.ruanyifeng.com/blog/2009/10/5_ways_to_search_for_files_using_the_terminal.html)



Hid say：重新认识Linux。
