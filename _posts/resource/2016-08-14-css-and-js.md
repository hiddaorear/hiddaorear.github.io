---
layout: post
title:  前端特效
category: 资源
tags: [日记]
keywords: 日记
description:
---

### 前端特效

#### 前端特效

#### Sunday, 14 Aug 2016

![cassini](/../../assets/img/resource/2016/cassini_7.jpg)

## 位置的测量


## jQuery

### `.on()`优点：

一次添加多个事件，`.on('click tap hover)`
设置命名空间，`.on('click.menuOpening')`，解除绑定的特定事件，`.off('click.menuOpening')`。

### 返回顶部

````javascript

<a class="top" href="javascript:;">Back to top</a>

$('.container').on('click', '.top', function(e) {
  e.preventDefalut();
  $('html, body').animate({scrollTop: 0}, 800);
})


````

### 禁用input

`$('input[type="submit"]').prop('disabled', false)`

### toggle的利用

````javascript
// Fade
$('.btn').on('click', function() {
  $('.element').fadeTogger('slow');
})

//Toggle
$('.btn').on('click', function() {
  $('.element').sliderToggle('slow');
})


````

#### 手风琴

````javascript

// close all panels
$('#accordion').find('.content').hide()

// accordion

$('#accordion').find('.accordion-header').on('click', function() {
  var $next = $(this).next();
  next.slideToggle('fast');
  $('.content').not(next).slideUp('fast');
  return false;
})

````


### Ajax返回错误的处理

````javascript

$(document).on('ajaxError', funtion(e, xhr, settings, error) {
  console.log(error);
})


````

### 列表排序

````javascript

var ul = $('#list')
var list = $('li', ul).get()

list.sort(function(e, b) {
  return ($(a).text().toUpperCase() < $(b).text().toUpperCase()) ? -1 : 1;
});

ul.append(list);

````

### 创建空jQuery对象

````javascript

var container = $([])
container.add(another_element)

````

### 自定义随机选择器

添加方法到`$.expr[':']`对象。比如创建一个随机元素选择器。

````javascript

(function($) {
  var random = 0;
  
  $.expr[':'].random = function(a, i, m, r) {
    if (i == 0) {
      random = Math.floor(Math.random() * r.length)
    }
    return i == random
  }
})(jQuery)

$('li:random').addClass('glow')


````

### `$.proxy()`

使用callback方法的缺点之一是当执行类库中的方法后，context被设置到另外一个元素。

````javascript

<div id="panel" style="display: none">
  <button>Close</button>
</div>

$('#panel').fadeIn(function() {
  // this points to #panel
  $('#panel button').on('click', function() {
    $(this).fadeOut();
  })
})

````

此时this指向button，而不是我们的所希望的panel。可以使用$.proxy方法，改变上下文：

````javascript

$('#panel').fadeIn(function() {
  $('#panel button').on('click', $.proxy(function() {
    $(this).fadeOut()
  }. this))
})


````

### 创建插件

````javascript

(function($) {
  $.fn.yourPluginName = function() {
    return this;
  }
})(jQuery)

````

### 设置全局Ajax

````javascript

$.ajaxSetup({
  url: '/ajax/',
  dataType: 'json'
})

$.ajaxStart(function() {
  showIndicator();
  disableButtons();
})

$.ajaxComplete(function() {
  hideIndicator();
  enableButtons();
})


````

### 动画的delay使用

````javascript

$('#elem').animate({width: 200}, function() {
  setTimeout(function() {
    $('#elem').animate({marginTop: 100})
  }, 200)
})

$('#elem').animate({width: 200}).delay(2000).animate({marginTop: 100})

````

## index解惑

Stacking Order层叠顺序

`正index > z-index:auto或z-index:0不依赖z-index的层叠上下文 > inline/inline-block水平盒子 > float浮动盒子 > block块状水平盒子 > 负z-index > 层叠上下文background/border`

总结：

`内容属性 > 布局属性 > 装饰属性`

注意：
z-index属性适用于那些被定义了除`position: static`外任意属性的元素中。既z-index仅能在定位元素上奏效(`position: absolute|relative|fix`)

触发stacking context堆叠上下文：

1. 定位元素并且定义了z-index为非auto；
2. FF，Safari，Chrome下元素设置opacity属性（1除外）会产生stacking context；
3. IE6，7下的定位元素，无论设置了z-index，或无论z-index设置成什么值，都会产生新的stacking context。

堆叠级别，值大者为上，同一级别，后来居上。不同堆叠上下文，子元素依赖父元素，与自身无关。总而言之，谁大谁上，后来居上。

CSS3与新时代的层叠上下文：

1. z-index值不为auto的flax项（父元素`dispaly:flex|inline-flex`）
2. 元素的`opacity`值不是1
3. 元素的`transform`值不是`none`
4. 元素的`mix-blend-mode`值不是`normal`
5. 元素的`filter`值不是`none`
6. 元素的`isolation`值是`isolate`
7. `will-change`指定的属性值为上面任意一个
8. 元素的`-webkit-overflow-scrolling`设为`touch`

# CSS画圈圈


## 图片处理



## 参考资料：

[深入理解CSS中的层叠上下文和层叠顺序](http://www.zhangxinxu.com/wordpress/2016/01/understand-css-stacking-context-order-z-index/)

hid say：琐碎。
