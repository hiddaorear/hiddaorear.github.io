# 工程

# 导读

**以具体例子为主，避免带入大量的概念**

# 典型问题

## 协议更新问题

现有只支持jce协议，但需要支持其他协议。

办法：

0. 复制一份代码，修改以支持新协议； 缺点：重复代码

1. Adapter适配器模式；

2. Proxy 代理模式；


## 微博更新同步问题

大V发布微博，所有关注他的人，如何收到更新？

1. 识别大V，添加对应的cache，然后所有人去读取cache；

2. 把大V的更新，写到所有关注人的cache中；缺点：即使用消息队列控制，但消耗资源太多

3. 直接读取大V的更新；缺点：数据压力太大

### 读写分离，轻重分离


## 项目重构问题

新旧项目共存，在新旧项目中间加一个中间层，新用户灰度新项目，并检查数据是否与预期一致，然后逐步迁移。旧项目数据变更，数据需要merge。


# change log

- 2020/10/27 created document.
